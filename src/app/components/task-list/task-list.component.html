<h1>Mes tâches</h1>

<div class="add-task">
  <input
    type="text"
    [(ngModel)]="newTaskTitle"
    placeholder="Nouvelle tâche..."
  />
  <button (click)="addTask()">Ajouter</button>
</div>

<nav>
  <button (click)="load('all')">Toutes</button>
  <button (click)="load('pending')">En cours</button>
  <button (click)="load('done')">Terminées</button>
</nav>

<div *ngIf="loading">Chargement…</div>
<div *ngIf="error" class="error">{{ error }}</div>

<ul>
  <li *ngFor="let task of tasks">
    {{ task.title }} — {{ task.dueDate | date }} —
    <span [class.done]="task.completed">
      {{ task.completed ? "✓" : "✗" }}
    </span>
    <a [routerLink]="['/tasks', task.id, 'edit']" class="btn-edit">Modifier</a>
    <button (click)="deleteTask(task.id)">Supprimer</button>
  </li>
</ul>
